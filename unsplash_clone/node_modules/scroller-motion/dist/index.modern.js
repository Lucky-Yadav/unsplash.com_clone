import{jsx as e}from"react/jsx-runtime";import{createContext as i,useMemo as t,useState as r,useEffect as n,useContext as o,forwardRef as l,useRef as s,useImperativeHandle as c}from"react";import{useTransform as d,useViewportScroll as h,useSpring as a,motion as u}from"framer-motion";import w from"debounce-fn";function f(){return f=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},f.apply(this,arguments)}function g(e,i){if(null==e)return{};var t,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i.indexOf(t=o[r])>=0||(n[t]=e[t]);return n}const m=i(void 0),p=({axisSpring:e,scale:i,refSize:r,windowSize:n})=>{const o=t(()=>r>n?r*i:r,[r,i,n]),l=t(()=>[0,o-n],[o,n]),s=t(()=>[0,-1*(r-n)],[r,n]);return{axis:d(e,l,s,{clamp:!1}),size:o}},v="function"==typeof ResizeObserver,y=()=>{const e=o(m);if(void 0===e)throw new Error("useScrollerMotion must be used within ScrollerMotion");return e},x=["children","childrenRef","disabled","height","style","width","x","y"],b={position:"fixed",left:0,top:0,right:0,bottom:0},z=i=>{let{children:r,childrenRef:n,disabled:o,height:l,style:s,width:c,x:d,y:h}=i,a=g(i,x);const w=t(()=>f({},s,o?{}:{height:l,width:c}),[o,l,s,c]),m=t(()=>o?{}:b,[o]),p=t(()=>({x:o?0:d,y:o?0:h}),[o,d,h]);return e("div",f({},a,{style:w,children:e("div",{style:m,children:e(u.div,{style:p,ref:n,children:r})})}))},S=["children","disabled","scale","spring"],E=1,O={damping:50,mass:1.25,stiffness:200},j=l((i,o)=>{let{children:l,disabled:d,scale:u=E,spring:y=O}=i,x=g(i,S);const b=s(null),{height:j,width:M,scrollX:R,scrollY:X,x:Y,y:H}=(({ref:e,scale:i,spring:o})=>{const l=t(()=>Math.max(1,i),[i]),{height:s,width:c}=(()=>{const[e,i]=r({height:0,width:0});return n(()=>{const e=()=>i({width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight});return e(),window.addEventListener("resize",e,!1),()=>window.removeEventListener("resize",e,!1)},[]),e})(),{height:d,width:u}=(e=>{const[i,t]=r({height:0,width:0});return n(()=>{const i=()=>{return t({height:null!=(r=null==(i=e.current)?void 0:i.scrollHeight)?r:0,width:null!=(n=null==i?void 0:i.scrollWidth)?n:0});var i,r,n},r=w(i,{wait:400});let n=null;return e.current&&(i(),window.addEventListener("resize",r),v&&(n=new ResizeObserver(i),n.observe(e.current))),()=>{window.removeEventListener("resize",r),n&&n.disconnect()}},[]),i})(e),{x:f,y:g}=(e=>{const{scrollX:i,scrollY:t}=h(),r="object"==typeof e?e:void 0,n=a(i,r),o=a(t,r);return{x:r?n:i,y:r?o:t}})(o),{axis:m,size:y}=p({axisSpring:f,scale:l,refSize:u,windowSize:c}),{axis:x,size:b}=p({axisSpring:g,scale:l,refSize:d,windowSize:s});return{height:b,width:y,scrollX:f,scrollY:g,x:m,y:x}})({ref:b,scale:u,spring:y});c(o,()=>({scrollX:R,scrollY:X,x:Y,y:H}),[R,X,Y,H]);const L=t(()=>({scrollX:R,scrollY:X,x:Y,y:H}),[R,X,Y,H]);return e(z,f({},x,{childrenRef:b,disabled:d,height:j,width:M,x:Y,y:H,children:e(m.Provider,{value:L,children:l})}))});j.displayName="ScrollerMotion";export{j as ScrollerMotion,y as useScrollerMotion};
//# sourceMappingURL=index.modern.js.map
